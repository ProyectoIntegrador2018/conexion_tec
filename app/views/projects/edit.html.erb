<% provide(:title, 'Crea tu proyecto') %>

<div class="container">

  <div class="row">
    <div class="col-12 col-md-6 offset-md-3">
      <h1>Actualiza tu proyecto</h1>
    </div>
  </div>
  
  <div class="row">
    <div class="col-12 col-md-6 offset-md-3">
      <%= form_for @user, url: project_path do |f| %>
        <%= f.fields_for :project, @user.project do |j| %>

        <%= render "errors" %>

        <div class="row">
        <div class="col">
          <div class="form-group">
            <%= f.label :email %>
            <%= f.email_field :email, class: "form-control" %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= f.label :password %>
            <%= f.password_field :password, class: "form-control" %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= f.label :password_confirmation %>
            <%= f.password_field :password_confirmation, class: "form-control" %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= j.label :name %>
            <%= j.text_field :name, class: "form-control" %>
          </div>
        </div>
      </div>  
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= j.label :field, class: "form-check-label" %>
            <%= j.select :field, Project.fields.keys.to_a, {}, class: "form-control" %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= j.label :kind %>
            <%= j.select :kind, Project.kinds.keys.to_a, {}, class: "form-control" %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= j.label :client %>
            <%= j.select :client, Project.clients.keys.to_a, {}, class: "form-control" %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= j.label :abstract %>
            <%= j.text_area :abstract, class: "form-control" %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= j.label :video_url %>
            <%= j.text_field :video_url, class: "form-control" %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-group">
            <%= j.label :professor %>
            <%= j.select :professor_id, 
                  options_for_select(Professor.all.collect{ |p| [p.name, p.id] } ), 
                  {}, class: "form-control" %>
          </div>
        </div>
      </div>

      <% if session[:role] == "admin" %>
        <div class="row">
          <div class="col">
            <div class="form-group">
              <%= j.label :status %>
              <%= j.select :status, Project.statuses.keys.to_a, {}, class: "form-control"%>
            </div>
          </div>
        </div>

        <div id="scoreDiv" style="display:none">
          <div class="row">
            <div class="col">
              <div class="form-group">
                <%= j.label :score , class: "score-field"%>
                <%= j.number_field :score, class: "score-field"%>
              </div>
            </div>
          </div>
        </div>
      <% end %>
        <div class="mt-3">
            <%= f.submit "Editar proyecto", class: "btn btn-primary"%>
        </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

